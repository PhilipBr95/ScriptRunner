@page
@model ScriptRunner.UI.Pages.DocsModel
@{
    ViewData["Title"] = "Documentation";
}

<md-block src="/files/readme.md" id="markdown"> 
</md-block>

<script>


	function populateContent() {
		let gitRepo = '@Model.GitRepo';
		let tag = '@Model.Tag';
		let scriptFolder = String.raw`@Model.ScriptFolder`;

		let str = document.getElementById("markdown");
		var inner = str.innerHTML;
		
		if (inner.length < 100) {
			setTimeout(populateContent, 1000);
		}
		
		var inner = inner.replace(/@@Model.GitRepo/gi, gitRepo);
		var inner = inner.replace(/@@Model.Tag/gi, tag);
		var inner = inner.replace(/@@Model.ScriptFolder/gi, scriptFolder);

		str.innerHTML = inner;
	}

	window.onload = function() {
		populateContent();
	}
</script>

@section Scripts {
	<script src="~/lib/md-block/md-block.js" type="module"></script>
	<script src="~/lib/md-block/prism.js" type="module"></script>
	<script src="~/js/docs.js"></script>

	<link href="~/lib/md-block/prism.css" rel="stylesheet" />
}